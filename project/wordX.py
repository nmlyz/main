import requests
import xml.etree.ElementTree as ET
import time
import hashlib
import base64
import urllib.parse
from datetime import datetime

_0x1 = [
    bytes([104, 116, 116, 112, 115, 58, 47, 47, 119, 119, 119, 46, 119, 111, 114, 100, 101, 110, 103, 105, 110, 101, 46, 106, 112]).decode(),
    bytes([97, 97, 97, 80, 114, 111, 103, 114, 101, 115, 115]).decode(),
    bytes([115, 104, 111, 119, 65, 110, 110, 111, 117, 110, 99, 101, 109, 101, 110, 116]).decode(),
    bytes([105, 115, 76, 111, 103, 103, 101, 100, 73, 110]).decode(),
    bytes([110, 105, 99, 107, 110, 97, 109, 101]).decode(),
    bytes([74, 83, 69, 83, 83, 73, 79, 78, 73, 68]).decode(),
    bytes([108, 97, 110, 103, 117, 97, 103, 101]).decode(),
    bytes([88, 45, 82, 101, 113, 117, 101, 115, 116, 101, 100, 45, 87, 105, 116, 104]).decode(),
    bytes([88, 77, 76, 72, 116, 116, 112, 82, 101, 113, 117, 101, 115, 116]).decode(),
    bytes([82, 101, 102, 101, 114, 101, 114]).decode(),
]

_0x2 = [
    bytes([47, 118, 101, 110, 103, 105, 110, 101, 47, 97, 112, 105, 47]).decode(),
    bytes([108, 111, 103, 105, 110, 47, 117, 115, 101, 114, 76, 111, 103, 105, 110]).decode(),
    bytes([117, 115, 101, 114, 105, 110, 102, 111, 47, 99, 104, 111, 111, 115, 101, 83, 112]).decode(),
    bytes([117, 115, 101, 114, 116, 111, 107, 101, 110, 47, 103, 101, 116, 78, 101, 119, 85, 115, 101, 114, 84, 111, 107, 101, 110]).decode(),
]

class WordEngine():
    def __init__(self, userid, userpw, num):
        self.ses = requests.Session()
        self._base_url = _0x1[0]
        self._api_path = _0x2[0]
        
        for i in range(num):
            try:
                print(bytes([76, 111, 103, 105, 110, 32, 105, 110, 32, 112, 114, 111, 99, 101, 115, 115, 46, 46, 46]).decode())
                self.Login(userid, userpw)
                print(bytes([83, 101, 108, 101, 99, 116, 105, 110, 103, 32, 97, 32, 115, 116, 117, 100, 121, 32, 112, 114, 111, 103, 114, 97, 109, 46, 46, 46]).decode())
                self.chooseSp()
                print(bytes([71, 101, 116, 116, 105, 110, 103, 32, 70, 108, 97, 115, 104, 87, 111, 114, 100, 84, 111, 107, 101, 110, 46, 46, 46]).decode())
                self.getUserToken()
                print(bytes([71, 101, 116, 116, 105, 110, 103, 32, 119, 111, 114, 100, 114, 105, 110, 103, 46, 46, 46]).decode())
                _0x4 = self.getWordring()
                print(bytes([71, 101, 110, 101, 114, 97, 116, 105, 110, 103, 32, 97, 107, 101, 121, 46, 46, 46]).decode())
                _0x5 = 60
                _0x6 = self.generateAkey(_0x5, self.user_token, self.loginid)
                print(bytes([83, 101, 110, 100, 105, 110, 103, 32, 116, 104, 101, 32, 97, 110, 115, 119, 101, 114, 46, 46, 46]).decode())
                _0x7 = self.submitAns(_0x5, _0x6, _0x4)
                if _0x7:
                    print(f"{_0x7}")
                    print(f"Login ID: {self.loginid}")
                    _0x8 = self.CheckWeekGoal()
                    if _0x8:
                        print(f"Day Status  : {{ {_0x8['daily_count']}/{_0x8['daily_goal']} }}")
                        print(f"Week Status : {{ {_0x8['weekly_count']}/{_0x8['weekly_goal']} }}\n")
            except Exception as e:
                print(f"An error has occurred: {str(e)}")
                import traceback
                print(traceback.format_exc())

    def timeStamp(self):
        return int(time.time() * 1000)

    def Login(self, user_id, user_pw):
        login_res = self.ses.post(
            f'{self._base_url}{self._api_path}{_0x2[1]}?loginId={user_id}&password={user_pw}',
        )
        if login_res.ok:
            print(bytes([76, 111, 103, 105, 110, 32, 115, 117, 99, 99, 101, 115, 115]).decode())
            self.nickname = ET.fromstring(login_res.content).find('.//username').text
            self.loginid = ET.fromstring(login_res.content).find('.//loginid').text
            self.jsession_id = ET.fromstring(login_res.content).find('.//jsessionid').text
        else:
            print(bytes([76, 111, 103, 105, 110, 32, 102, 97, 105, 108, 101, 100]).decode())
            exit()

        ses_cookies = {
            _0x1[1]: '100',
            _0x1[2]: '0',
            _0x1[3]: '1',
            _0x1[4]: self.nickname,
            _0x1[5]: self.jsession_id,
            _0x1[6]: 'ja',
        }
        self.ses.cookies.update(ses_cookies)

    def chooseSp(self):
        headers = {
            _0x1[9]: f'{self._base_url}/my_page.html',
            _0x1[7]: _0x1[8]
        }
        spid_res = self.ses.get(
            f'{self._base_url}{self._api_path}{_0x2[2]}?spId=59&_={self.timeStamp()}',
            headers=headers
        )
        if not spid_res.ok:
            print(bytes([83, 80, 32, 115, 101, 108, 101, 99, 116, 105, 111, 110, 32, 102, 97, 105, 108, 101, 100]).decode())
            exit()
        self.ses.cookies.update({
            'flashword_spid': '59',
            'getStoredTask': 'false'
        })

    def getUserToken(self):
        headers = {
            _0x1[9]: f'{self._base_url}/my_page.html',
            _0x1[7]: _0x1[8]
        }
        token_res = self.ses.get(
            f'{self._base_url}{self._api_path}{_0x2[3]}?_={self.timeStamp()}',
            headers=headers
        )
        if not token_res.ok:
            print(bytes([70, 97, 105, 108, 101, 100, 32, 116, 111, 32, 103, 101, 116, 32, 70, 108, 97, 115, 104, 87, 111, 114, 100, 84, 111, 107, 101, 110]).decode())
            exit()
        self.user_token = ET.fromstring(token_res.content).find('.//user_token').text
        self.ses.cookies.update({
            'flashword_token': self.user_token,
            'flashword_spname': r'%E4%B8%80%E8%88%AC%E8%8B%B1%E5%8D%98%E8%AA%9E',
            'flashword_spcategory': 'general',
            'application_id': '18'
        })

    def getWordring(self):
        now = datetime.now().strftime('%Y%m%d%H%M%S')
        headers = {
            _0x1[9]: f'{self._base_url}/flashwords.html',
            _0x1[7]: _0x1[8]
        }
        word = self.ses.get(
            f'{self._base_url}/vengine/api/studymode/getnewwordring3?sessionType=study&applicationId=18&wordCount=15&otherLanguageCode=ja&noCache={now}&_={self.timeStamp()}',
            headers=headers
        )
        if not word.ok:
            print(bytes([70, 97, 105, 108, 101, 100, 32, 116, 111, 32, 103, 101, 116, 32, 119, 111, 114, 100, 114, 105, 110, 103]).decode())
            exit()
        root = ET.fromstring(word.content)
        content_text = root.find('.//content').text
        self.token = root.find('.//token').text
        decoded_content = urllib.parse.unquote(base64.b64decode(content_text))
        self.word_ids = [word.get('id') for word in ET.fromstring(decoded_content).findall('.//word')]
        result = ""
        for i, word_id in enumerate(self.word_ids):
            result += (
                f"answers[{i}].correct=true&"
                f"answers[{i}].removed=false&"
                f"answers[{i}].secondsTaken=0&"
                f"answers[{i}].wordId={word_id}&"
                f"answers[{i}].questionType=4&"
                f"answers[{i}].questionCulture=ja&"
                f"answers[{i}].timedout=false&"
                f"answers[{i}].sequenceId={i+1}&"
            )
        return result

    def generateAkey(self, total_score, flash_word_token, login_id):
        base_url = f"{total_score}a{flash_word_token}a{login_id}a"
        result = ""
        for word_id in self.word_ids:
            result += f"truea0a{word_id}a"
        main_url = base_url + result
        sha_obj = hashlib.sha256(main_url.encode('ascii'))
        hash_result = sha_obj.hexdigest()
        return hash_result

    def submitAns(self, totalscore, akey, w_result):
        headers = {
            _0x1[9]: f'{self._base_url}/flashwords.html',
            _0x1[7]: _0x1[8]
        }
        url = f'{self._base_url}/vengine/api/studymode/submitanswers4?totalScore={totalscore}&{w_result}akey={akey}&token={self.token}&_={self.timeStamp()}'
        res = self.ses.get(url, headers=headers)
        if not res.ok:
            print(bytes([70, 97, 105, 108, 101, 100, 32, 116, 111, 32, 115, 101, 110, 100, 32, 97, 110, 115, 119, 101, 114]).decode())
            print(res.text)
            exit()
        root = ET.fromstring(res.text)
        message = root.find('.//message').text
        return message

    def CheckWeekGoal(self):
        headers = {
            _0x1[9]: f'{self._base_url}/my_page.html',
            _0x1[7]: _0x1[8]
        }
        url = f'{self._base_url}/vengine/api/goalcorrectresponse/showCorrectResponseGoal?weeksBeforeFrom=0&_={self.timeStamp()}'
        res = self.ses.get(url, headers=headers)
        if not res.ok:
            print(bytes([70, 97, 105, 108, 101, 100, 32, 116, 111, 32, 103, 101, 116, 32, 112, 114, 111, 103, 114, 101, 115, 115]).decode())
            return None
        root = ET.fromstring(res.text)
        progress = {
            'daily_count': root.find('.//daily_cr_count').text,
            'daily_goal': root.find('.//daily_cr_goal').text,
            'weekly_goal': root.find('.//weekly_cr_goal').text,
            'weekly_count': root.find('.//weekly_cr_history').get('weekly_cr_count')
        }
        return progress